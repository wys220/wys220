import{u as e}from"./vue-router-887b1494.js";import{b as t,i as o,e as f,j as s,o as n,c as i,a as l,n as a,M as h,O as r,ai as u,Q as c}from"./@vue-a48b1e2a.js";import{_ as y}from"./index-dcb380ac.js";import"./@element-plus-a71f3b6f.js";import"./element-plus-7eff7cb6.js";import"./lodash-es-d4f5f48c.js";import"./@vueuse-ca817af0.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./dayjs-c6009091.js";import"./aplayer-5d7f43e3.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-dcb2e9bc.js";import"./vxe-table-9d1c2804.js";import"./xe-utils-c57e546e.js";import"./dom-zindex-e3f8f991.js";import"./axios-da7e9e83.js";import"./vuex-b5ec2b38.js";import"./vue-i18n-680abb53.js";import"./@intlify-b54f8de8.js";let w=t([]),x=!1;function m(e,t,o,f=!0){let s=e.getContext("2d");s.strokeStyle="blue",s.lineWidth=2,x=f;let n=0,i=0;e.onmousemove=function(f){let l;if(n=f.offsetX,i=f.offsetY,0===t.length)d(e,s,t);else if(void 0===o)t.forEach((function(o,f){o.w>0&&o.h>0&&n>o.x&&n<o.x+o.w&&i>o.y&&i<o.y+o.h&&(l=f,b(e,s,t,l)),o.w<0&&o.h>0&&n<o.x&&n>o.x+o.w&&i>o.y&&i<o.y+o.h&&(l=f,b(e,s,t,l)),o.w>0&&o.h<0&&n>o.x&&n<o.x+o.w&&i<o.y&&i>o.y+o.h&&(l=f,b(e,s,t,l)),o.w<0&&o.h<0&&n<o.x&&n>o.x+o.w&&i<o.y&&i>o.y+o.h&&(l=f,b(e,s,t,l)),void 0===l&&d(e,s,t)}));else for(let a=0;a<t.length;a++){let f=t[a];if(n<f.x+5&&n>f.x-5&&i<f.y+5&&i>f.y-5){if(a===o){p(e,s,t,o,1);break}}else if(n<f.x+f.w+5&&n>f.x+f.w-5&&i<f.y+5&&i>f.y-5){if(a===o){p(e,s,t,o,2);break}}else if(n<f.x+5&&n>f.x-5&&i<f.y+f.h+5&&i>f.y+f.h-5){if(a===o){p(e,s,t,o,3);break}}else if(n<f.x+f.w+5&&n>f.x+f.w-5&&i<f.y+f.h+5&&i>f.y+f.h-5){if(a===o){p(e,s,t,o,4);break}}else{if(f.w>0&&f.h>0&&n>f.x&&n<f.x+f.w&&i>f.y&&i<f.y+f.h){l=a,b(e,s,t,a);break}if(f.w<0&&f.h>0&&n<f.x&&n>f.x+f.w&&i>f.y&&i<f.y+f.h){l=a,b(e,s,t,a);break}if(f.w>0&&f.h<0&&n>f.x&&n<f.x+f.w&&i<f.y&&i>f.y+f.h){l=a,b(e,s,t,a);break}if(f.w<0&&f.h<0&&n<f.x&&n>f.x+f.w&&i<f.y&&i>f.y+f.h){l=a,b(e,s,t,a);break}void 0===l&&d(e,s,t)}}e.onmouseout=function(){void 0!==o&&m(e,t,o,x)}},w.value=[],w.value=t}function p(e,t,o,f,s){e.style.cursor="pointer";let n=o[f];e.onmousedown=function(i){let l=i.offsetX,a=i.offsetY,h=n.w,r=n.h,u=n.x,c=n.y;e.onmousemove=function(n){let i={};switch(s){case 1:if(i={x:n.offsetX,y:n.offsetY,w:h+(l-n.offsetX),h:r+(a-n.offsetY)},x){let t=h+l-n.offsetX,o=r+a-n.offsetY,f=Y(e,n.offsetX,n.offsetY,t,o);i={x:f.x,y:f.y,w:f.w,h:f.h}}break;case 2:if(i={x:u,y:n.offsetY,w:h-l+n.offsetX,h:r+a-n.offsetY},x){let t=h-l+n.offsetX,o=r+a-n.offsetY,f=Y(e,u,n.offsetY,t,o);i={x:f.x,y:f.y,w:f.w,h:f.h}}break;case 3:if(i={x:n.offsetX,y:n.offsetY-(r-a+n.offsetY),w:h+l-n.offsetX,h:r-a+n.offsetY},x){let t=h+l-n.offsetX,o=r-a+n.offsetY,f=Y(e,n.offsetX,n.offsetY-o,t,o);i={x:f.x,y:f.y,w:f.w,h:f.h}}break;case 4:if(i={x:u,y:c,w:h-l+n.offsetX,h:r-a+n.offsetY},x){let t=h-l+n.offsetX,o=r-a+n.offsetY,f=Y(e,u,c,t,o);i={x:f.x,y:f.y,w:f.w,h:f.h}}}for(let e in i)o[f][e]=i[e];k(e,t,o,f)},e.onmouseout=function(){k(e,t,o),m(e,o,null,x)},v(e,t,o,f)}}function d(e,t,o){e.style.cursor="crosshair";let f=!1,s=0,n=0;e.onmousedown=function(i){f=!0,s=i.offsetX,n=i.offsetY,v(e,t,o,null),e.onmousemove=function(i){f&&(k(e,t,o),t.beginPath(),t.setLineDash([8,4]),t.rect(s,n,i.offsetX-s,i.offsetY-n),t.stroke())},e.onmouseup=function(i){if(f&&Math.abs(i.offsetX-s)>10&&Math.abs(i.offsetY-n)>10){let l={x:s,y:n,w:i.offsetX-s,h:i.offsetY-n};if(x){let t=Y(e,s,n,i.offsetX-s,i.offsetY-n);l={x:t.x,y:t.y,w:t.w,h:t.h}}o.push(l),k(e,t,o),f=!1,m(e,o,null,x)}else k(e,t,o),f=!1,m(e,o,null,x)},e.onmouseout=function(i){if(f&&Math.abs(i.offsetX-s)>10&&Math.abs(i.offsetY-n)>10){let l={x:s,y:n,w:i.offsetX-s,h:i.offsetY-n};if(x){let t=Y(e,s,n,i.offsetX-s,i.offsetY-n);l={x:t.x,y:t.y,w:t.w,h:t.h}}o.push(l),k(e,t,o),f=!1,m(e,o,null,x)}else k(e,t,o),f=!1,m(e,o,null,x)}}}function b(e,t,o,f){e.style.cursor="default";let s=0,n=0;e.onmousedown=function(i){s=i.offsetX,n=i.offsetY,k(e,t,o,f),e.onmouseup=function(){k(e,t,o,f),m(e,o,f,x)},function(e,t,o,f,s,n){let i=o[f],l=i.x,a=i.y;e.onmousemove=function(h){let r={x:l+h.offsetX-s,y:a+h.offsetY-n,w:i.w,h:i.h};if(x){let t=l+h.offsetX-s,o=a+h.offsetY-n,f=Y(e,t,o,i.w,i.h);r={x:f.x,y:f.y,w:f.w,h:f.h}}for(let e in r)o[f][e]=r[e];v(e,t,o,f),k(e,t,o,f)},e.onmouseup=function(){k(e,t,o,f),m(e,o,f,x)}}(e,t,o,f,s,n),v(e,t,o,f)}}function v(e,t,o,f){e.onkeydown=null===f?function(){return!1}:function(s){8==(s.keyCode||s.which)&&null!==f&&(o.length>=1?(o.splice(f,1),k(e,t,o)):t.clearRect(0,0,e.width,e.height),v(e,t,o,null),k(e,t,o),m(e,o,null,x))}}function k(e,t,o,f){t.setLineDash([8,0]),t.clearRect(0,0,e.width,e.height),o.forEach((function(e,o){void 0!==f&&o==f||(t.beginPath(),t.strokeStyle="blue",t.rect(e.x,e.y,e.w,e.h),t.stroke())})),o.forEach((function(e,o){o===f&&(t.beginPath(),t.strokeStyle="red",t.rect(e.x,e.y,e.w,e.h),t.fillStyle="RGBA(102,102,102,0.2)",t.fillRect(e.x,e.y,e.w,e.h),t.stroke(),t.beginPath(),t.strokeStyle="red",t.arc(e.x,e.y,4,0,2*Math.PI),t.fillStyle="white",t.fill(),t.stroke(),t.beginPath(),t.arc(e.x,e.y+e.h,4,0,2*Math.PI),t.fillStyle="white",t.fill(),t.stroke(),t.beginPath(),t.arc(e.x+e.w,e.y+e.h,4,0,2*Math.PI),t.fillStyle="white",t.fill(),t.stroke(),t.beginPath(),t.arc(e.x+e.w,e.y,4,0,2*Math.PI),t.fillStyle="white",t.fill(),t.stroke())}))}function Y(e,t,o,f,s){let n=e.width,i=e.height;return t<0?t=0:t+f>n&&(t=n-f-4>0?n-f-4:0),o<0?o=0:o+s>i&&(o=i-s-4>0?i-s-4:0),{x:t,y:o,w:f,h:s}}const g={class:"content",ref:"contentRef"},j={ref:"markCanvasRef",tabindex:"0"},X={class:""},M={components:{DrawRectangle:y({__name:"DrawRectangle",setup(e){const{proxy:h}=o(),r=t([]);f((()=>w.value),(e=>{}),{deep:!0});const u=()=>{a((()=>{let e=h.$refs.markCanvasRef,t=h.$refs.contentRef;const o=t.offsetWidth,f=t.offsetHeight;e.width=o||"800",e.height=f||"600";let s=e.getContext("2d");s.strokeStyle="blue",e.style.cursor="crosshair";let n=r.value;n.forEach((function(t,o,f){let s={x:t.x*e.width,y:t.y*e.height,w:t.w*e.width,h:t.h*e.height};n.splice(o,1,s)})),0!==n.length&&n.forEach((function(e,t,o){s.rect(e.x,e.y,e.w,e.h),s.stroke()})),m(e,n)}))};return s((()=>{u(),window.addEventListener("resize",(()=>{u()}))})),(e,t)=>(n(),i("div",g,[l("canvas",j,null,512)],512))}},[["__scopeId","data-v-b2775e0f"]]),MathsCompute:{__name:"MathsCompute",setup:e=>(e,t)=>(n(),i("div",X," 数学计算题组件 "))}}},P=Object.assign(M,{__name:"details",setup(f){o();const i=e(),l=t("");return s((()=>{var e;l.value=(null==(e=i.params)?void 0:e.type)||"DrawRectangle"})),(e,t)=>{const o=u("g-detail");return n(),h(o,null,{default:r((()=>[(n(),h(c(l.value)))])),_:1})}}});export{P as default};
